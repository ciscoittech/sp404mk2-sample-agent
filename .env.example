# ==========================================
# SP404MK2 Sample Agent - Environment Configuration
# ==========================================
# Copy this file to .env and fill in your values
# ==========================================

# ------------------------------------------
# REQUIRED: OpenRouter API (AI Analysis)
# ------------------------------------------
# Get your API key from https://openrouter.ai/
# Required for AI-powered sample vibe analysis
# Cost: ~$0.00001-$0.00005 per sample (using Qwen models)
OPENROUTER_API_KEY=

# ------------------------------------------
# REQUIRED: Database Configuration
# ------------------------------------------
# Choose ONE database option:

# Option 1: PostgreSQL (Recommended for production)
DATABASE_URL=postgresql+asyncpg://sp404_user:changeme123@localhost:5433/sp404_samples

# Option 2: Turso (LibSQL - Edge-distributed database)
# Sign up at https://turso.tech/ (free tier available)
# TURSO_DATABASE_URL=libsql://your-database.turso.io
# TURSO_AUTH_TOKEN=your-token-here

# ------------------------------------------
# OPTIONAL: YouTube API (Channel Monitoring)
# ------------------------------------------
# Get your API key from https://console.cloud.google.com/
# Only needed if you want automated channel monitoring
# Note: yt-dlp works without this for basic downloads
# YOUTUBE_API_KEY=

# ------------------------------------------
# OPTIONAL: GitHub Integration
# ------------------------------------------
# Only needed if using GitHub issue tracking features
# Can use 'gh' CLI authentication instead
# GITHUB_TOKEN=

# ------------------------------------------
# Application Settings
# ------------------------------------------
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO
APP_URL=http://localhost:8100

# ------------------------------------------
# Security (Change in Production!)
# ------------------------------------------
SECRET_KEY=your-secret-key-here-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ------------------------------------------
# File Storage Paths
# ------------------------------------------
# Relative paths from project root
UPLOAD_DIR=./uploads
DOWNLOAD_PATH=./downloads
SAMPLE_PATH=./samples
REVIEW_QUEUE_PATH=./review_queue

# ------------------------------------------
# Audio Processing Settings
# ------------------------------------------
DEFAULT_SAMPLE_RATE=44100
DEFAULT_BIT_DEPTH=16
MAX_DOWNLOAD_SIZE_MB=100
MAX_FILE_SIZE=52428800  # 50MB in bytes
ALLOWED_AUDIO_EXTENSIONS=.wav,.mp3,.flac,.ogg,.m4a,.aiff
AUDIO_ANALYSIS_TIMEOUT=30

# ------------------------------------------
# Audio Analysis Backend
# ------------------------------------------
# USE_ESSENTIA: Enable Essentia for BPM detection (requires installation)
# Set to false to use librosa only (default for easy setup)
USE_ESSENTIA=false

# ENABLE_GENRE_CLASSIFICATION: Enable Essentia genre classification
# Requires Essentia + TensorFlow models (~150MB download)
# Currently disabled by default due to model compatibility
ENABLE_GENRE_CLASSIFICATION=false

# ESSENTIA_BPM_METHOD: BPM detection method when Essentia is enabled
# Options: "multifeature" (accurate), "degara" (fast), "percival" (balanced)
ESSENTIA_BPM_METHOD=multifeature

# ------------------------------------------
# AI Model Configuration
# ------------------------------------------
# Default models (all available via OpenRouter)
CHAT_MODEL=google/gemma-3-27b-it
COLLECTOR_MODEL=qwen/qwen3-235b-a22b-2507
ARCHITECT_MODEL=deepseek/deepseek-r1

# Model parameters
MODEL_TEMPERATURE=0.5
MODEL_MAX_TOKENS=8000
CHAT_MAX_TOKENS=4000
COLLECTOR_MAX_TOKENS=2000

# ------------------------------------------
# Cost Management & Limits
# ------------------------------------------
# Budget limits (USD)
MONTHLY_BUDGET_USD=10.0
DAILY_TOKEN_LIMIT=100000
BUDGET_ALERT_THRESHOLD=0.8
COST_ALERT_THRESHOLD_USD=5.00

# YouTube API quota management
YOUTUBE_DAILY_QUOTA=10000
YOUTUBE_QUOTA_ALERT_THRESHOLD=0.8
YOUTUBE_CRAWL_FREQUENCY_DAYS=7
YOUTUBE_PRIORITY_CRAWL_FREQUENCY_DAYS=1

# ------------------------------------------
# CORS Settings (Frontend)
# ------------------------------------------
# Comma-separated list of allowed origins
BACKEND_CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ------------------------------------------
# Vector Search Settings (Advanced)
# ------------------------------------------
# Used for semantic similarity search
EMBEDDING_MODEL=openai/text-embedding-3-small
EMBEDDING_DIMENSIONS=1536
DEFAULT_SIMILARITY_THRESHOLD=0.7
MAX_SEARCH_RESULTS=10000

# ------------------------------------------
# Redis (Optional - for caching)
# ------------------------------------------
# Leave empty to run without Redis
# REDIS_URL=redis://localhost:6379

# ------------------------------------------
# Agent Configuration
# ------------------------------------------
AGENT_LOG_LEVEL=INFO
AGENT_MAX_RETRIES=3
AGENT_TIMEOUT_SECONDS=300

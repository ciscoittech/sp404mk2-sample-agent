<!-- SP-404 Batch Export Progress Template -->
<div class="alert alert-info" role="alert">
    <div class="flex flex-col gap-2">
        <div class="flex items-center gap-2">
            <svg class="w-6 h-6 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
            </svg>
            <div>
                <h3 class="font-bold">Batch Export Complete</h3>
                <div class="text-sm">
                    <p>Processed {{ result.total_requested }} samples</p>
                    <p>✓ Successful: {{ result.successful }}</p>
                    {% if result.failed > 0 %}
                    <p>✗ Failed: {{ result.failed }}</p>
                    {% endif %}
                    <p>Organization: {{ result.organized_by }}</p>
                    <p>Total Size: {{ (result.total_size_bytes / 1024 / 1024)|round(2) }} MB</p>
                    {% if result.export_id %}
                    <p class="mt-2">
                        <a href="/api/v1/sp404/exports/{{ result.export_id }}/download"
                           class="btn btn-sm btn-primary">
                            Download ZIP
                        </a>
                    </p>
                    {% endif %}
                </div>
            </div>
        </div>
        {% if result.errors %}
        <div class="mt-2">
            <details>
                <summary class="cursor-pointer text-sm">View Errors ({{ result.errors|length }})</summary>
                <ul class="list-disc list-inside text-xs mt-1">
                    {% for error in result.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </details>
        </div>
        {% endif %}
    </div>
</div>
